(this["webpackJsonpprimitive-graphics-editor"]=this["webpackJsonpprimitive-graphics-editor"]||[]).push([[0],{12:function(e,t,o){e.exports={container:"Workspace_container__3ekjz",placedShapeContainer:"Workspace_placedShapeContainer__37Jcn",selectionFrame:"Workspace_selectionFrame__laqWK"}},16:function(e,t,o){e.exports={container:"Shape_container__2Sk0S",placed:"Shape_placed__1JReE",selected:"Shape_selected__DvLwZ",polygon:"Shape_polygon__3w0Ec"}},19:function(e,t,o){e.exports={container:"App_container__2Jf1A"}},2:function(e,t,o){e.exports={container:"SidePanel_container__1K-Pa",block:"SidePanel_block__3EQeg",shapes:"SidePanel_shapes__RRv-I",blockStyle:"SidePanel_blockStyle__1SXU7",property:"SidePanel_property__3Xp4c",savingStatus:"SidePanel_savingStatus__3YyW8"}},20:function(e,t,o){e.exports=o(33)},25:function(e,t,o){},32:function(e,t,o){},33:function(e,t,o){"use strict";o.r(t);var n=o(0),c=o.n(n),i=o(10),a=o.n(i),r=(o(25),o(1)),s=o(4),l=o(5),d=o(6),u=o(9),v=o(11);var p=function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];var n=t[0],c=t[1];return[Math.min(n,c),Math.max(n,c)]};function f(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];var n=t[0],c=t[1],i=p(n[0][0],n[1][0]),a=Object(l.a)(i,2),r=a[0],s=a[1],d=p(n[0][1],n[1][1]),u=Object(l.a)(d,2),v=u[0],f=u[1],b=p(c[0][0],c[1][0]),h=Object(l.a)(b,2),m=h[0],j=h[1],O=p(c[0][1],c[1][1]),y=Object(l.a)(O,2),g=y[0],w=y[1];return r<=j&&m<=s&&v<=w&&g<=f}var b=window.localStorage.getItem("objects"),h={objects:(b?JSON.parse(b):[]).map((function(e){return Object(r.a)(Object(r.a)({},e),{},{selected:!1})})),workspaceSize:void 0,workspacePosition:void 0,selectedObjects:[],lastColor:void 0,lastBorderColor:void 0,nonCompleteSelectedObjects:[],nonCompleteUnselectedObjects:[],previousCursorPositionOnMoving:void 0,firstCursorPositionOnSelecting:void 0,saved:!0,saveTimoutId:void 0,selectionFrame:void 0},m=function(e){var t=e.selectedObjects,o=e.nonCompleteSelectedObjects,n=e.nonCompleteUnselectedObjects,c=Object(u.a)(t);if(o.length&&c.push.apply(c,Object(u.a)(o)),n.length){var i,a=Object(d.a)(n);try{for(a.s();!(i=a.n()).done;){var r=i.value;delete c[c.indexOf(r)]}}catch(s){a.e(s)}finally{a.f()}}return c.filter((function(e){return void 0!==e}))},j=Object(v.b)({name:"workspace",initialState:h,reducers:{setWorkspaceProperties:function(e,t){var o=t.payload;e.workspacePosition=o.position,e.workspaceSize=o.size},setColor:function(e,t){var o,n=t.payload,c=Object(d.a)(e.selectedObjects);try{for(c.s();!(o=c.n()).done;){var i=o.value;e.objects[i].color=n}}catch(a){c.e(a)}finally{c.f()}e.lastColor=n},setBorderColor:function(e,t){var o,n=t.payload,c=Object(d.a)(e.selectedObjects);try{for(c.s();!(o=c.n()).done;){var i=o.value;e.objects[i].border.color=n}}catch(a){c.e(a)}finally{c.f()}e.lastBorderColor=n},create:function(e,t){var o=t.payload,n=e.workspaceSize;n&&(e.objects.push(Object(r.a)(Object(r.a)({},o),{},{position:[n.width/2-o.size.width/2,n.height/2-o.size.height/2]})),e.selectedObjects=[e.objects.length-1])},select:function(e,t){var o=t.payload;e.selectedObjects.includes(o)||e.selectedObjects.push(o)},unselectAll:function(e){e.selectedObjects=[]},selectAll:function(e){e.selectedObjects=[];var t,o=Object(d.a)(e.objects.entries());try{for(o.s();!(t=o.n()).done;){var n=Object(l.a)(t.value,2),c=n[0];n[1]&&e.selectedObjects.push(c)}}catch(i){o.e(i)}finally{o.f()}},deleteSelected:function(e){var t,o=Object(d.a)(e.selectedObjects);try{for(o.s();!(t=o.n()).done;){var n=t.value;delete e.objects[n]}}catch(c){o.e(c)}finally{o.f()}e.selectedObjects=[]},mouseDownOnObject:function(e,t){var o=t.payload,n=o.objectIndex,c=o.x,i=o.y,a=o.shiftKey;if(e.previousCursorPositionOnMoving=[c,i],a){var r=e.selectedObjects.indexOf(n);-1===r?e.selectedObjects.push(n):e.selectedObjects=[].concat(Object(u.a)(e.selectedObjects.slice(0,r)),Object(u.a)(e.selectedObjects.slice(r+1)))}else e.selectedObjects.includes(n)||(e.selectedObjects=[n])},mouseDownOnWorkspace:function(e,t){if(e.workspacePosition){var o=[t.payload.point[0]-e.workspacePosition[0],t.payload.point[1]-e.workspacePosition[1]];e.selectionFrame=[o,o],e.firstCursorPositionOnSelecting=t.payload.point,t.payload.shiftKey||(e.selectedObjects=[])}},mouseUpOrMoveOnWorkspace:function(e,t){var o,n,c=t.payload,i=e.previousCursorPositionOnMoving,a=e.firstCursorPositionOnSelecting,r=e.selectedObjects,s=c.shiftKey;if("move"===c.type&&i){var u,v=c.currentCursorPosition,p=i,b=Object(d.a)(e.selectedObjects);try{for(b.s();!(u=b.n()).done;)for(var h=u.value,j=0,O=[0,1];j<O.length;j++){var y=O[j],g=v[y]-p[y];e.objects[h].position[y]+=g}}catch(K){b.e(K)}finally{b.f()}e.previousCursorPositionOnMoving=v}if(a&&e.workspacePosition&&e.selectionFrame){if("shiftToggled"!==c.type){var w=c.currentCursorPosition;e.selectionFrame=(n=[[a[0]-e.workspacePosition[0],a[1]-e.workspacePosition[1]],[w[0]-e.workspacePosition[0],w[1]-e.workspacePosition[1]]],[[Math.min(n[0][0],n[1][0]),Math.min(n[0][1],n[1][1])],[Math.max(n[0][0],n[1][0]),Math.max(n[0][1],n[1][1])]])}e.nonCompleteSelectedObjects=[],e.nonCompleteUnselectedObjects=[];var S,k=e.nonCompleteSelectedObjects,E=e.nonCompleteUnselectedObjects,C=Object(d.a)(e.objects.entries());try{for(C.s();!(S=C.n()).done;){var _=Object(l.a)(S.value,2),P=_[0],x=_[1];x&&(f([[(o=x).position[0],o.position[1]],[o.position[0]+o.size.width,o.position[1]+o.size.height]],e.selectionFrame)&&(s?r.includes(P)?E.includes(P)||E.push(P):k.includes(P)||k.push(P):r.includes(P)||k.includes(P)||k.push(P)))}}catch(K){C.e(K)}finally{C.f()}e.nonCompleteSelectedObjects=k.filter((function(e){return void 0!==e})),e.nonCompleteUnselectedObjects=E.filter((function(e){return void 0!==e}))}if("up"===c.type){var M=c.currentCursorPosition,W=(null===a||void 0===a?void 0:a[0])===M[0]&&(null===a||void 0===a?void 0:a[1])===M[1];e.selectedObjects=W?[]:m(e),e.nonCompleteSelectedObjects=[],e.nonCompleteUnselectedObjects=[],e.previousCursorPositionOnMoving=void 0,e.firstCursorPositionOnSelecting=void 0,e.selectionFrame=void 0}},save:function(e){e.saveTimoutId&&(window.clearTimeout(e.saveTimoutId),e.saveTimoutId=void 0),e.saved=!0;var t=e.objects.filter((function(e){return e}));window.localStorage.setItem("objects",JSON.stringify(t))},setSaveTimeout:function(e,t){var o=t.payload;e.saveTimoutId&&window.clearTimeout(e.saveTimoutId),e.saveTimoutId=o,e.saved=!1}}}),O=j.actions,y=O.setWorkspaceProperties,g=O.create,w=(O.select,O.unselectAll),S=O.selectAll,k=O.deleteSelected,E=O.mouseDownOnObject,C=O.mouseDownOnWorkspace,_=O.mouseUpOrMoveOnWorkspace,P=O.save,x=O.setColor,M=O.setBorderColor,W=O.setSaveTimeout,K=function(){return function(e){var t=window.setTimeout((function(){e(P())}),5e3);e(W(t))}},T=function(e){return function(t){t(e),t(K())}};function z(e){return Object(r.a)(Object(r.a)({},e.workspace),{},{selectedObjects:m(e.workspace)})}var A=j.reducer;o(32);function F(e){var t=e.boxWidth,o=e.boxHeight,n=e.angles,i=e.style,a=e.eventHandlers,s=(i=Object(r.a)({strokeWidth:0},i)).strokeWidth/2,l=t-s,d=o-s,u=3===n?"\n        ".concat(t/2,",").concat(s,"\n        ").concat(l,",").concat(d,"\n        ").concat(s,",").concat(d,"\n    "):"\n        ".concat(s,",").concat(s,"\n        ").concat(l,",").concat(s,"\n        ").concat(l,",").concat(d,"\n        ").concat(s,",").concat(d,"\n    ");return c.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:String(t),height:String(o),viewBox:"0 0 ".concat(t," ").concat(o),style:i},c.a.createElement("polygon",Object.assign({points:u},a)))}var N=o(16),I=o.n(N);function L(e){var t,o=e.type,n=e.size,i=n.width,a=n.height,r=e.border,s=e.color,l=e.selected,d=e.selectionFrameStyle,u=e.eventHandlers;if(d){var v=/(\d)+px/.exec(d),p=null===v||void 0===v?void 0:v[1];t=p?-p:void 0}return c.a.createElement("div",{className:[I.a.container,l?I.a.selected:""].join(" "),style:l?{border:d,margin:t}:void 0},c.a.createElement(F,{boxWidth:i,boxHeight:a,angles:"rectangle"===o?4:3,style:{fill:s,strokeWidth:r.width,stroke:r.color},eventHandlers:u}))}var B=o(2),U=o.n(B),D={width:80,height:40},H={width:3,color:"#818181"},J=["rectangle","triangle"].map((function(e){return{type:e,size:D,color:"#EAEAEA",border:H}}));function X(){var e=Object(s.b)(),t=Object(s.c)(z),o=t.workspaceSize,n=t.saved,i=t.objects,a=t.selectedObjects,l=t.lastColor,d=t.lastBorderColor;return c.a.createElement("div",{className:U.a.container},c.a.createElement("div",{className:[U.a.block,U.a.blockShapes].join(" ")},c.a.createElement("h2",null,"Shapes"),c.a.createElement("div",{className:U.a.shapes},J.map((function(t){return c.a.createElement(L,Object.assign({key:t.type},t,{selectionFrameStyle:"2px dashed #2F80ED",selected:!1,eventHandlers:{onClick:function(){o&&e(T(g(Object(r.a)(Object(r.a)({},t),{},{color:l||"#EAEAEA",border:Object(r.a)(Object(r.a)({},t.border),{},{color:d||H.color})}))))}}}))})))),c.a.createElement("div",{className:[U.a.block,U.a.blockStyle].join(" ")},c.a.createElement("h2",null,"Style"),c.a.createElement("div",{className:[U.a.property,U.a.propertyFill].join(" ")},c.a.createElement("h3",null,"Fill"),c.a.createElement("input",{type:"color",value:0===a.length?"#000000":i[a[0]].color,disabled:0===a.length,onChange:function(t){e(T(x(t.target.value)))}})),c.a.createElement("div",{className:[U.a.property,U.a.propertyBorder].join(" ")},c.a.createElement("h3",null,"Border"),c.a.createElement("input",{type:"color",value:0===a.length?"#000000":i[a[0]].border.color,disabled:0===a.length,onChange:function(t){e(T(M(t.target.value)))}}))),c.a.createElement("div",{className:[U.a.block,U.a.savingStatus].join(" ")},n?"Saved \ud83d\udc4c":"Saving... \ud83d\ude09"))}var Y=o(12),R=o.n(Y);function q(){var e,t,o=Object(s.c)(z),i=o.selectionFrame,a=o.previousCursorPositionOnMoving,r=o.firstCursorPositionOnSelecting,l=o.objects,d=o.selectedObjects,u=Object(s.b)(),v=Object(n.useRef)(null),p=null===(e=v.current)||void 0===e?void 0:e.offsetWidth,f=null===(t=v.current)||void 0===t?void 0:t.offsetHeight;return Object(n.useEffect)((function(){if(v.current){var e=v.current,t=e.offsetWidth,o=e.offsetHeight,n=e.offsetLeft,c=e.offsetTop,i=function(){u(y({size:{width:t,height:o},position:[n,c]}))};return i(),window.addEventListener("resize",i),function(){window.removeEventListener("resize",i)}}}),[p,f,u]),Object(n.useEffect)((function(){var e=function(e){"keydown"===e.type?"Escape"===e.code?u(w()):"Delete"===e.code||"Backspace"===e.code?u(k()):"KeyA"!==e.code||!e.ctrlKey||e.altKey||e.shiftKey?"Shift"===e.key&&u(_({type:"shiftToggled",shiftKey:!0})):u(S()):"keyup"===e.type&&"Shift"===e.key&&u(_({type:"shiftToggled",shiftKey:!1}))};return document.addEventListener("keydown",e),document.addEventListener("keyup",e),function(){document.removeEventListener("keydown",e),document.removeEventListener("keyup",e)}}),[u]),Object(n.useEffect)((function(){var e=function(){"hidden"===document.visibilityState&&u(P())},t=function(){u(P())};return document.addEventListener("visibilitychange",e),window.addEventListener("close",t),function(){document.removeEventListener("visibilitychange",e),window.removeEventListener("close",t)}}),[u]),c.a.createElement("div",{className:R.a.container,ref:v,onMouseDown:function(e){var t=e.clientX,o=e.clientY,n=e.shiftKey;v.current&&u(C({point:[t,o],shiftKey:n}))},onMouseUp:function(e){var t=e.clientX,o=e.clientY,n=e.shiftKey;u(_({type:"up",currentCursorPosition:[t,o],shiftKey:n}))},onMouseMove:function(e){var t=e.clientX,o=e.clientY,n=e.shiftKey;(a||r)&&(u(_({type:"move",currentCursorPosition:[t,o],shiftKey:n})),a&&u(K()))}},l.map((function(e,t){return e&&c.a.createElement("div",{key:t,className:R.a.placedShapeContainer,style:{left:e.position[0],top:e.position[1]}},c.a.createElement(L,Object.assign({},e,{selected:d.includes(t),eventHandlers:{onMouseDown:function(e){var o=e.clientX,n=e.clientY,c=e.shiftKey;e.stopPropagation(),u(E({objectIndex:t,x:o,y:n,shiftKey:c}))}}})))})),i&&c.a.createElement("div",{className:R.a.selectionFrame,style:{left:i[0][0],top:i[0][1],width:i[1][0]-i[0][0],height:i[1][1]-i[0][1]}}))}var Q=o(19),Z=o.n(Q);function $(){return c.a.createElement("div",{className:Z.a.container},c.a.createElement(X,null),c.a.createElement(q,null))}var G=Object(v.a)({reducer:{workspace:A}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(s.a,{store:G},c.a.createElement($,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[20,1,2]]]);
//# sourceMappingURL=main.95f5a608.chunk.js.map